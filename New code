var assessment_record = current.variables.assessment_record+"";
var businessApplication = current.variables.business_application+"";

var grAAI = new GlideRecord('asmt_assessment_instance');
if (grAAI.get(assessment_record)) {
	new HGC_ACDC_Utils().saveAssessementToBusinessApps(grAAI, true, businessApplication);
	var willBecomeCritical =  current.variables.critical_application == "Yes";
	var isCritical = current.variables.confirm_as_critical == "meets";
	var isRBAC = current.variables.critical_app_set_to == "YesRBAC";
	if(willBecomeCritical && isCritical && isRBAC){
		var grCCBA = new GlideRecord('cmdb_ci_business_app');
		if (grCCBA.get(businessApplication)) {
			grCCBA.setValue("u_critical_application_risk", "YesRBAC");
			grCCBA.update();
		}
	}
}

